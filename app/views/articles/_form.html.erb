<%= simple_form_for(@article) do |f| %>
  <%= f.error_notification %>

  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
  <ul>
    <% @article.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
  </ul>

  <div class="form-inputs">
    <div class="field">
      <div class="control">
        <%= f.input :title,
                    required: true,
                    autofocus: true,
                    input_html: { class: 'input' },
                    wrapper: false,
                    label_html: { class: 'label' }
        %>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <%= f.input :image,
                    as: :file,
                    required: true,
                    wrapper: false,
                    label_html: { class: 'label' }
        %>
      </div>
    </div>

    <div class="field">
      <div class="control">
        <%= f.input :text,
                    required: true,
                    input_html: { class: 'textarea' },
                    wrapper: false,
                    label_html: { class: 'label' }
        %>
      </div>
    </div>

    <% if @categories.present? %>  
    <div class="field">
      <label class="label">Category</label>
      <div class="control">
        <span class="checkbox">
          <%= f.collection_check_boxes :category_ids, 
                                        Category.all,
                                        :id,
                                        :name,
                                        label_html: { class: 'label checkbox' }
          %>
        </span>
      </div>
    </div>
    <% end %>

    <div class="field">
      <label class="label">Create New Category</label>
      <div class="control ">
        <span class="category">
          <%= f.simple_fields_for :categories, @article.categories.build do |fields| %>
            <%= fields.input :name %>
            <%= fields.input :priority %>
          <% end %>
        </span>
      </div>
    </div>

  </div>

  <div class="form-actions">
    <%= f.button :submit, class: "button is-info" %>
  </div>
<% end %>
<br />